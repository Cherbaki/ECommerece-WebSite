@page
@model RegisterModel
@{
    ViewData["Title"] = "Register";
    Layout = "/Areas/Identity/Pages/_Layout.cshtml";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

<div class="row">
    <div style="display:flex;justify-content:center;">
        <form enctype="multipart/form-data" id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post" style="min-width:200px;width:600px;">
            <h2 style="text-align:center;font-size:60px;">Create a new account</h2>
            <hr />
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-floating">
                <input asp-for="Input.FirstName" class="form-control" autocomplete="firstname" aria-required="true" />
                <label asp-for="Input.FirstName"></label>
                <span asp-validation-for="Input.FirstName" class="text-danger"></span>
            </div>
            <div class="form-floating">
                <input asp-for="Input.LastName" class="form-control" autocomplete="lastname" aria-required="true" />
                <label asp-for="Input.LastName"></label>
                <span asp-validation-for="Input.LastName" class="text-danger"></span>
            </div>
            <div class="form-floating">
                <input asp-for="Input.Email" class="form-control" autocomplete="username" aria-required="true" />
                <label asp-for="Input.Email"></label>
                <span asp-validation-for="Input.Email" class="text-danger"></span>
            </div>
            <div class="form-floating">
                <input asp-for="Input.Password" class="form-control" autocomplete="new-password" aria-required="true" />
                <label asp-for="Input.Password"></label>
                <span asp-validation-for="Input.Password" class="text-danger"></span>
            </div>
            <div class="form-floating">
                <input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" />
                <label asp-for="Input.ConfirmPassword"></label>
                <span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
            </div>

            <div class="mt-2 mb-2">
                <label asp-for="Input.ImageFile"></label>
                <input id="PIIF" asp-for="Input.ImageFile" style="display:none;" class="form-control" aria-required="true" accept="image/jpeg,image/png,image/jpj"/>
                <div style="display:flex;justify-content:center;align-items:end;width:100px;height:100px;border:solid;border-radius:8px;
                    border-color:darkgray;border-width:2px;cursor:pointer;" onclick="document.getElementById('PIIF').click();">
                    <img id="ProfileImage" style="width:100%;height:100%;"/>
                    <i id="ImageIcon" class="bi bi-image-fill" style="font-size:25px;opacity:0.7;position:absolute;"></i>
                </div>
                <span asp-validation-for="Input.ImageFile" class="text-danger"></span>
            </div>

            <button type="submit" class="w-100 btn btn-lg btn-primary">Register</button>
        </form>
    </div>
</div>


<script>

    var PIIF = document.getElementById('PIIF');
    var ProfileImage = document.getElementById('ProfileImage');
    var ImageIcon = document.getElementById('ImageIcon');
    var MainForm = document.getElementById('MainForm');


    PIIF.oninput = function(){
        var fReader = new FileReader();
        fReader.addEventListener("load",() => {
            ProfileImage.src = fReader.result;
        })
        fReader.readAsDataURL(this.files[0]);
        if(ProfileImage.src != undefined || ProfileImage.src != ''){
            ImageIcon.style.display = 'none';
        }
    }


</script>



@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
